<script>
    const nusp_aluno = "{{ nusp_aluno }}";  
    const parecerResp = document.getElementById('parecer-resp');

    fetch(`/feedback/${nusp_aluno}`)
        .then(response => response.json()) 
        .then(data => {
            const tabelaBody = document.getElementById('tabelaBody');

            // Limpa a tabela antes de inserir novos dados
            tabelaBody.innerHTML = '';

            // Itera sobre os relatórios retornados e cria as linhas da tabela
            data.detalhes_aluno.forEach(detalhe_aluno => {
                const row = document.createElement('tr');

                row.innerHTML = `
                    <td>${detalhes_aluno.aluno}</td>
                    <td>${detalhes_aluno.nusp_aluno}</td>
                    <td>${detalhes_aluno.curso}</td>
                    <td>${detalhes_aluno.lattes}</td>
                    // Data da ultima atualizacao do lattes
                    <td>${detalhes_aluno.disc_aprov}</td>
                    <td>${detalhes_aluno.reprovacoes}</td>
                    <td>${detalhes_aluno.disc_reprov}</td>
                    <td>${detalhes_aluno.resumo_pesq}</td>
                    <td>${detalhes_aluno.parecer_orient}</td>
                `;

                tabelaBody.appendChild(row);
            });
        })
        .catch(error => {
            console.error('Erro ao buscar relatórios do aluno:', error);
        });
</script>

<!-- Bootstrap JS Bundle (inclui Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
